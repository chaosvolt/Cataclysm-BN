# 유물

# 유물

유물은 특별한 유물 데이터가 첨부된 일반 아이템입니다.

유물 데이터는 해당 아이템 타입 정의의 `relic_data` 필드에 JSON으로 정의되며, 아이템이 스폰될 때마다 유물 데이터의 복사본이 아이템 인스턴스에 첨부됩니다.

유물 데이터 객체는 다음 필드를 포함할 수 있습니다:

```json
{
"name": "Boots of Haste",       // 기본 아이템 이름을 덮어씁니다.
"moves": 100,                   // (선택 사항) 활성화 이동 비용 (기본값 100)
"charges_per_activation": 1,    // (선택 사항) 활성화당 충전량 (기본값 1)
"active_effects": [ {}, ... ],  // (선택 사항) 활성화 시 실행되는 주문 (`hit_you_effect`와 동일, [MAGIC.md](MAGIC.md/#hit_you_effect) 참조)
"passive_effects": [ {}, ... ], // (선택 사항) 패시브 효과(마법 부여) 목록, [MAGIC.md](MAGIC.md/#enchantments) 참조
"recharge_scheme": [ {}, ... ], // (선택 사항) 재충전 방법 목록, 아래 참조
}
```

## 유물 재충전

유물은 특정 조건에서 재충전될 수 있습니다. 재충전 방법은 다음과 같이 정의됩니다(모든 필드 선택 사항):

총, 도구 및 탄창에만 작동합니다. 아이템이 다른 아이템에 장전되어 있는 동안에는 작동하지 않습니다.

```json
{
  "type": "time", // 소비되는 자원을 정의합니다. 기본값: time
  "req": "none", // 재충전이 작동하는 조건을 정의합니다. 기본값: none (특별한 요구사항 없음)
  "field": "fd_blood", // 'field' 재충전 타입과 함께 소비될 필드 타입
  "trap": "tr_portal", // 'trap' 재충전 타입과 함께 소비될 함정 타입
  "interval": "5 minutes", // 재충전 체크가 수행되는 간격. 기본값: 1초
  "int_min": 1, // 관련 'type' 효과의 최소 강도. 기본값: 0
  "int_min": 5, // 관련 'type' 효과의 최대 강도. 기본값: 0
  "rate": 2, // 재충전 작업이 성공할 때 복원되는 충전량. 기본값: 0
  "message": "Your body decays!" // 성공 시 출력할 선택적 메시지
}
```

### 재충전 타입

| ID        | 설명                                                                                                                       |
| --------- | -------------------------------------------------------------------------------------------------------------------------- |
| `time`    | 추가 자원이 필요 없음                                                                                                      |
| `solar`   | 햇빛을 소비 (캐릭터가 햇빛 아래에 있어야 함)                                                                               |
| `pain`    | 재충전을 위해 고통을 유발. 강도는 `int_min`과 `int_max`로 제어                                                             |
| `hp`      | 모든 신체 부위에 피해를 입힘. 강도는 `int_min`과 `int_max`로 제어                                                          |
| `fatigue` | 피로를 유발하고 체력을 소모. 피로 소모는 `int_min`과 `int_max`로 제어, 체력 소모는 `[ int_min*100, int_max*100 ]`으로 롤됨 |
| `field`   | 인접한 필드를 소비. 허용되는 필드 강도는 `int_min`과 `int_max`로 제어                                                      |
| `trap`    | 인접한 함정을 소비.                                                                                                        |

### 재충전 요구사항

| ID              | 설명                                                          |
| --------------- | ------------------------------------------------------------- |
| `none`          | 추가 요구사항 없음 (항상 작동)                                |
| `equipped`      | 방어구면 착용해야 하고, 무기면 휘두르고 있어야 함.            |
| `close_to_skin` | 다른 모든 의복 아래에 착용하거나, 맨손으로 휘두르고 있어야 함 |
| `sleep`         | 캐릭터가 자고 있어야 함                                       |
| `rad`           | 캐릭터나 맵 타일이 방사능에 노출되어 있어야 함                |
| `wet`           | 캐릭터가 젖어 있거나, 비가 오고 있어야 함                     |
| `sky`           | 캐릭터가 z=0 위에 있어야 함                                   |
