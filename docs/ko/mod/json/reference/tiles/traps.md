---
title: 함정
---

### trap

```json
{
  "type": "trap",                // 이것을 함정으로 정의
  "id": "tr_caltrops_glass",     // 고유 식별자
  "name": "glass caltrops",      // 표시되는 이름
  "color": "dark_gray",          // 타일이 비활성화되었거나 스프라이트가 정의되지 않은 경우 표시되는 기호의 색상
  "symbol": "_",                 // 타일이 비활성화되었거나 스프라이트가 정의되지 않은 경우 표시되는 기호
  "looks_like": "tr_caltrops",   // 이 부분에 타일이 없는 경우 타일셋에 대한 힌트, looks_like 타일 사용
  "visibility": 6,               // 플레이어가 배치하지 않은 경우 이 함정을 발견하는 난이도, 지각력에 대해 확인됩니다. 0은 함정이 플레이어로부터 절대 숨겨지지 않음을 의미합니다
  "avoidance": 6,                // 밟았을 때 함정이 작동할 가능성. 0은 밟아도 함정이 절대 작동하지 않음을 의미합니다
  "difficulty": 0,               // 함정을 해제하기 어려운 정도, 높을수록 더 어렵습니다.
  "action": "caltrops_glass",    // 함정이 작동할 때 수행하는 작업, 자세한 내용은 trapfunc.cpp 또는 아래 참조
  "spell_data": { "id": "spell_trap_can_alarm_trigger" },   // `spell` 함정 액션으로 함정이 시전하는 주문의 `id`
  "map_regen": "microlab_shifting_hall",    // `map_regen` 액션이 있는 함정에서 사용, 적용되는 영역에 사용되는 `mapgen_update` 항목을 정의합니다.
  "remove_on_trigger": true,     // 함정이 작동한 후 스스로 제거되나요? 함정이 반복적으로 작동하도록 의도된 경우 생략하세요. 지형에서 생성된 함정에는 권장되지 않습니다
  "trigger_items": [ "tripwire", "shotgun_d", { "item": "shot_hull", "quantity": 2, "charges": 1 } ],   // 함정이 작동할 때 생성되는 아이템, `quantity`배이고 `charges` 양입니다(아이템에 탄약과 같은 기본 스택 크기가 있는 경우 사용). `beartrap`, `snare_light`, `snare_heavy`, `pit_spikes`, `pit_glass`, `crossbow`는 여전히 다양한 이유로 하드코딩된 동작으로 생성되는 일부 아이템이 있습니다.
  "drops": [ "tripwire", "shotgun_d", { "item": "shot_00", "quantity": 2, "charges": 1 } ],   // 함정이 성공적으로 해제될 때 떨어지는 아이템. `quantity` 또는 `charges`의 선택적 사용은 `trigger_items`와 동일한 규칙을 따릅니다
  "vehicle_data": {              // 차량의 바퀴가 이 함정을 밟았을 때 발생하는 동작 블록, 플레이어나 몬스터가 함정을 작동시키는 일반 동작과 별개입니다
    "do_explosion": true,        // true이면 함정을 작동시킨 정확한 차량 타일에 단순히 피해 값을 적용하는 대신 폭발을 생성합니다
    "damage": 1000,              // 작동시킨 차량 타일에 적용되는 직접 피해, 또는 `do_explosion`이 true인지에 따라 진앙지의 기본 피해
    "shrapnel": 8,               // 폭발하도록 설정된 경우 파편 피해
    "sound_volume": 10,          // 지정된 경우 작동할 때 재생되는 소리의 볼륨
    "sound": "Boom!",            // 메시지 로그에 게시된 소리 설명, "You hear %s" 형식
    "sound_type": "explosion",   // 가능한 타입: background, weather, music, movement, speech, activity, destructive_activity, alarm, combat, alert, order
    "sound_variant": "default"   // 사용되는 소리 변형
  },
  "benign": true,                // 이것은 작동시키기 위한 함정이 아니라 롤매트나 깔때기와 같은 무해한 것을 의미하므로 플레이어가 정말 밟아도 되는지 묻지 않으며, `PATH_AVOID_DANGER_2` 몬플래그를 가진 몬스터는 이것을 피하는 것에 신경 쓰지 않습니다. 실제로 해를 끼칠 수 있는 `action`과 함께 사용하는 것은 나쁜 생각입니다
  "funnel_radius": 200           // 깔때기에 사용, 비가 올 때 이 함정은 이 값을 기반으로 한 속도로 물을 수집하며, 자동으로 동일한 타일에 배치된 빈 컨테이너 아이템을 채웁니다
  "floor_bedding_warmth": -1000, // 롤매트 등에 사용, 잠자는 데 사용될 때 이 지형/가구가 제공하는 보너스 따뜻함.
},
```

#### action

다음 액션은 trapfunc.cpp에 정의된 대로 사용할 수 있습니다:

- `none` - 아무것도 하지 않음, 깔때기 및 함정 동작이 필요하지 않은 다른 것에 사용됩니다.
- `bubble` - 버블 랩을 밟으면 팝 소리가 나며, 그게 전부입니다.
- `glass` - 밟은 것에 약간의 절단 피해를 가하고, 바삭한 유리 소리가 납니다.
- `cot` - 플레이어나 NPC에게는 완벽하게 안전하고 아늑하지만, 몬스터는 넘어져서 턴을 잃습니다.
- `beartrap` - 피해를 가하고 희생자를 그 타일에 묶어두어 벗어날 때까지 잠급니다. 그렇다면 아이템 자체는 벗어난 후에 나중에 떨어집니다.
- `board` - 밟은 것에 약간의 피해를 가하고, 그들로부터 일부 이동을 뺍니다.
- `caltrops` - 밟은 것에 피해를 가하고, 그들로부터 일부 이동을 뺍니다.
- `caltrops_glass` - `caltrops_glass`와 동일한 기본 효과이지만 더 많은 유리 바삭거리는 소리가 납니다.
- `tripwire` - 성공적으로 희생자를 넘어뜨리면 약간의 피해를 가하고, 그들을 뒤로 밀치고 그들로부터 이동을 뺍니다.
- `crossbow` - 놓칠 가능성이 있는 관통 피해를 가하며, 떨어진 탄약은 여전히 무작위 생성 확률로 인해 하드코딩되어 있습니다.
- `shotgun` - 작동시킨 사람에게 무거운 탄도 피해를 가합니다. 함정의 ID가 구체적으로 `tr_shotgun_2`이면 희생자는 한 번만이 아니라 두 번 맞습니다.
- `blade` - 작동시킨 사람을 때리고 직접 타격 및 절단 피해를 가합니다.
- `snare_light` - 피해를 가하고 희생자를 그 타일에 묶어두어 벗어날 때까지 잠그며, 효과가 사라질 때 관련 아이템을 생성합니다.
- `snare_heavy` - `snare_light`와 비슷하지만 더 높은 피해이며, 대상이 벗어날 때 다른 아이템 생성이 있습니다.
- `landmine` - 중간 피해와 무거운 파편이 있는 폭발.
- `boobytrap` - `landmine`과 동일한 효과이지만 작동 시 다른 메시지가 인쇄됩니다.
- `telepad` - 희생자를 8타일 이내의 무작위 공간으로 순간 이동시키며, 벽으로 순간 이동할 위험이 있고 그들에게 텔레글로우를 가합니다.
- `goo` - 플레이어와 NPC는 피해를 입을 가능성이 있고 슬라임으로 느려지며, 슬라임이 아닌 몬스터는 속도 디버프를 받고 로봇이 아닌 몬스터는 슬라임으로 변합니다.
- `dissector` - 희생자에게 절단 피해를 가하며, `ROBOT` 종의 생물은 면역입니다.
- `pit` - 희생자는 낙하 피해를 입고 다시 올라올 때까지 제자리에 갇힙니다.
- `pit_spikes` - `pit`과 같지만 스파이크로 인한 추가 피해. 스파이크가 부러질 무작위 확률이 있으며, 추가 아이템을 생성하고 기본 지형을 `t_pit`로 변환합니다.
- `pit_glass` - `pit_spikes`와 유사하지만, 부러질 것으로 결정되면 나무 창 대신 유리 파편을 생성합니다.
- `lava` - 작동시킨 것에 높은 수준의 열 피해를 가합니다.
- `portal` - 현재 `telepad`의 별칭이며 정확히 동일한 효과를 작동시킵니다.
- `sinkhole` - 작동되면 기본 지형을 `t_pit`로 변환하고 구덩이에 떨어지는 효과를 작동시킵니다. 플레이어는 인벤토리에 그래플링 훅, 불휘프 또는 긴 밧줄이 있거나 Web Diver 돌연변이가 있는 경우 이를 방지하려고 시도할 수 있습니다.
- `ledge` - 아래에 있는 것으로 한 레벨 떨어지며, 잠재적인 낙하 피해를 작동시킵니다.
- `temple_flood` - 이상한 사원에서 사용되어 영역의 바닥을 깊은 물로 변환하는 하드코딩된 이벤트를 작동시킵니다. 플레이어만 작동시킬 수 있으며, NPC나 몬스터는 불가능합니다.
- `temple_toggle` - 이상한 사원에서 사용되어, 빨강/녹색/파랑 퍼즐 타일을 바닥과 벽 형태 사이에서 토글합니다. 플레이어만 작동시킬 수 있으며, NPC나 몬스터는 불가능합니다.
- `glow` - 플레이어와 NPC를 방사선에 노출시키고 섬광탄으로 만드는 무작위 확률이 있으며, 몬스터는 대신 산성 피해와 속도 디버프를 받을 가능성이 있습니다.
- `hum` - 거의 들을 수 없는 것부터 귀가 먹을 정도까지 무작위 볼륨의 윙윙거리는 소리를 냅니다.
- `shadow` - 근처에 그림자 몬스터를 소환합니다. 플레이어만 작동시킬 수 있으며, NPC나 몬스터는 불가능합니다.
- `map_regen` - 함정의 `map_regen`에 지정된 맵젠 업데이트를 함정이 있는 맵 타일에 적용하여 맵을 변경합니다. 사용되는 경우 맵젠 업데이트가 함정을 제거하거나, 다른 것으로 변경하거나, 함정 정리 함수를 방해하는 다른 작업을 수행할 수 있으므로 `remove_on_trigger` 및 `trigger_items`는 처리되지 않습니다.
- `drain` - 대상에게 아주 약간의 피해를 가하며, 갑옷과 면역을 무시합니다.
- `spell` - 함정의 `spell_data`로 지정된 주문을 작동시킨 것을 중심으로 시전합니다. 사용되는 주문은 일반적으로 성공적으로 작동하려면 정의된 `min_aoe`가 필요하며, 모든 주문 효과가 이것으로 제대로 작동할 것으로 기대할 수는 없습니다.
- `snake` - `shadow` 함정 효과와 유사하게, 근처에 그림자 뱀을 소환합니다. 주요 차이점은 NPC와 몬스터가 작동시킬 수 있다는 것입니다.
